{% extends 'base.html' %}

{% block content %}

<!-- Header-->
<header class="bg-dark py-5">
    <div class="container px-4 px-lg-5 my-2">
        <div class="text-center text-white">
            <h1 class="display-4 fw-bolder">Profil</h1>
        </div>
    </div>
</header>

{% if not user.is_superuser %}
<div class="container">
    <div class="row d-flex align-items-stretch">
        <!-- Utilisation des classes d-flex et align-items-stretch pour que les sections aient la même hauteur -->
        <!-- Section à gauche -->
        <div class="col-4">
            <div class="section">
                <div class="row justify-content-center">
                    <div class="col-8">
                        <br /><br />
                        <div class="media">
                            <div class="media-body">
                                <h2 class="account-heading">{{ user.username }}</h2>
                            </div>
                        </div>
                        <fieldset class="form-group">
                            <div class="form-row">
                                <div class="form-group d-flex justify-content-between">
                                    <label for="id_first_name" class="me-2">Prénom :</label>
                                    <p>{{ user.first_name }}</p>
                                </div>
                                <div class="form-group  d-flex justify-content-between">
                                    <label for="id_last_name">Nom :</label>
                                    <p>{{ user.last_name }}</p>
                                </div>

                                <div class="form-group d-flex justify-content-between">
                                    <label for="id_email">E-mail :</label>
                                    <p>{{ user.email }}</p>
                                </div>
                                <div class="form-group d-flex justify-content-between">
                                    <label for="id_phone">Téléphone :</label>
                                    <p>0{{ user.phone }}</p>
                                </div>

                                <div class="form-group  d-flex justify-content-between">
                                    <label for="id_address">Adresse : </label>
                                    <p>{{ user.address }}</p>
                                </div>
                                <div class="form-group d-flex justify-content-between">
                                    <label for="id_postal">Code Postal :</label>
                                    <p>{{ user.postal }}</p>
                                </div>

                                <div class="form-group  d-flex justify-content-between">
                                    <label for="id_ville">Ville :</label>
                                    <p>{{ user.ville }}</p>
                                </div>
                            </div>
                        </fieldset>
                        <br />
                        <div class="form-group">
                            <a href="{% url 'profile_edit' user.username %}" class="btn btn-outline-info">Modifier</a>
                        </div>

                        <br /><br />
                    </div>
                </div>
            </div>
        </div>

        <!-- Section à droite -->
        <div class="col-8">
            <div class="section">
                {% if demandes %}
                <div class="section my-4">
                    <h4>Toutes vos demandes:</h4>
                    <ol class="list-group list-group my-4">
                        {% for demande in demandes %}
                        <div class="row justify-content-evenly align-items-center">
                            <div class="col-md-4">
                                <li class="list-group-item">{{demande.service}}</li>
                            </div>
                            <div class="col-md-4">
                                <li class="list-group-item">{{demande.date}}</li>
                            </div>
                            <div class="col-md-2">
                                <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                                    data-bs-target="#demandeModal{{ demande.id }}">
                                    Info
                                </button>
                            </div>
                        </div>

                        <div class="modal fade" id="demandeModal{{ demande.id }}" tabindex="-1"
                            aria-labelledby="demandeModalLabel{{ demande.id }}" aria-hidden="true">
                            <div class="modal-dialog modal-lg">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="demandeModalLabel{{ demande.id }}">Détails de la
                                            demande</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal"
                                            aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <p><strong>Service:</strong> {{ demande.service }}</p>
                                        <p><strong>Date:</strong> {{ demande.date }}</p>
                                        <p><strong>Statut:</strong> {{ demande.status }}</p>
                                        <p><strong>Genre:</strong> {{ demande.genre }}</p>
                                        <p><strong>Détails:</strong> {{ demande.details }}</p>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary"
                                            data-bs-dismiss="modal">Fermer</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </ol>
                </div>
                {% endif %}
                {% if voitureSoumisses %}
                <div class="section my-4">
                    <h4 class="my-2">Toutes vos soummissions:</h4>
                    <ol class="list-group list-group my-4">
                        {% for voitureSoumisse in voitureSoumisses %}
                        <div class="row ">
                            <div class="col-3">
                                <li class="list-group-item">{{voitureSoumisse.marque}}</li>
                            </div>
                            <div class="col-1">
                                <li class="list-group-item">{{voitureSoumisse.modele}}</li>
                            </div>
                            <div class="col-2">
                                <li class="list-group-item">{{voitureSoumisse.annee_fabrication}}</li>
                            </div>
                            <div class="col-2">
                                <li class="list-group-item">{{voitureSoumisse.carburant}}</li>
                            </div>
                            <div class="col-2">
                                <li class="list-group-item">{{voitureSoumisse.transmission}}</li>
                            </div>
                            <div class="col-2">
                                <button class="btn btn-light" type="button" disabled>Ouvrir</button>
                            </div>
                        </div>
                        {% endfor %}

                    </ol>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% else %}
<div class="container">
    <div class="row d-flex align-items-stretch">
        <!-- Utilisation des classes d-flex et align-items-stretch pour que les sections aient la même hauteur -->
        <!-- Section à gauche -->
        <div class="col-4">
            <div class="section">
                <div class="row justify-content-center">
                    <div class="col-8">
                        <br /><br />
                        <div class="media">
                            <div class="media-body">
                                <h5 class="account-heading"> Administrateur : {{ user.username }}</h5>
                            </div>
                        </div>
                        <fieldset class="form-group">
                            <div class="form-row">
                                <div class="form-group d-flex justify-content-between">
                                    <label for="id_first_name" class="me-2">Prénom :</label>
                                    <p>{{ user.first_name }}</p>
                                </div>
                                <div class="form-group  d-flex justify-content-between">
                                    <label for="id_last_name">Nom :</label>
                                    <p>{{ user.last_name }}</p>
                                </div>

                                <div class="form-group d-flex justify-content-between">
                                    <label for="id_email">E-mail :</label>
                                    <p>{{ user.email }}</p>
                                </div>
                                <div class="form-group d-flex justify-content-between">
                                    <label for="id_phone">Téléphone :</label>
                                    <p>0{{ user.phone }}</p>
                                </div>

                                <div class="form-group  d-flex justify-content-between">
                                    <label for="id_address">Adresse : </label>
                                    <p>{{ user.address }}</p>
                                </div>
                                <div class="form-group d-flex justify-content-between">
                                    <label for="id_postal">Code Postal :</label>
                                    <p>{{ user.postal }}</p>
                                </div>

                                <div class="form-group  d-flex justify-content-between">
                                    <label for="id_ville">Ville :</label>
                                    <p>{{ user.ville }}</p>
                                </div>
                            </div>
                        </fieldset>
                        <br />
                        <div class="form-group">
                            <a href="{% url 'profile_edit' user.username %}" class="btn btn-outline-info">Modifier</a>
                        </div>

                        <br /><br />
                    </div>
                </div>
            </div>
        </div>

        <!-- Section à droite -->
        <div class="col-8">
            <div class="section">
                {% if demandes %}
                <div class="section my-4">
                    <h4>Toutes les demandes:</h4>
                    <ol class="list-group list-group my-4">
                        {% for demande in demandes %}
                        <div class="row justify-content-evenly">
                            <div class="col-8">
                                <li class="list-group-item">{{demande.service}}</li>
                            </div>
                            <div class="col-4">
                                <li class="list-group-item">{{demande.date}}</li>
                            </div>
                        </div>
                        {% endfor %}
                    </ol>
                </div>
                {% endif %}
                {% if voitureSoumisses %}
                <div class="section my-4">
                    <h4 class="my-2">Toutes les soummissions:</h4>
                    <ol class="list-group list-group my-4">
                        {% for voitureSoumisse in toutesVoituresSoumise %}
                        <div class="row ">
                            <div class="col-3">
                                <li class="list-group-item">{{voitureSoumisse.marque}}</li>
                            </div>
                            <div class="col-1">
                                <li class="list-group-item">{{voitureSoumisse.modele}}</li>
                            </div>
                            <div class="col-2">
                                <li class="list-group-item">{{voitureSoumisse.annee_fabrication}}</li>
                            </div>
                            <div class="col-2">
                                <li class="list-group-item">{{voitureSoumisse.carburant}}</li>
                            </div>
                            <div class="col-2">
                                <li class="list-group-item">{{voitureSoumisse.transmission}}</li>
                            </div>
                            <div class="col-2">
                                <button class="btn btn-light" type="button" disabled>Ouvrir</button>
                            </div>
                        </div>
                        {% endfor %}

                    </ol>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endif %}
<!-- <div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true"></div>
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            afficher ici les details
        </div>
    </div>
</div> -->
{% endblock %}